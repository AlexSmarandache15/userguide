<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="wa-force-track-changes">
  <title>Control Change Tracking State</title>
  <prolog>
    <metadata>
      <keywords>
        <indexterm>Control change tracking state</indexterm>
      </keywords>
    </metadata>
  </prolog>
  <body>
    <p>You can set the initial state of the <xref
        href="https://www.oxygenxml.com/doc/versions/23.1.1/ug-waCustom/glossary/track-changes.html"
        format="html" scope="external"><i>Change Tracking</i> feature</xref> in the <xref
        href="webapp-admin-page.dita#webapp-admin-page/change-track-initial-state">Administration
        page</xref> (using the <uicontrol id="change-track-initial-state">Change tracking initial
        state</uicontrol> option). You can choose between <b>Stored in document</b>, <b>Always
        On</b>, and <b>Always Off</b>.</p>
    <p>You can also use a <b>trackChanges</b> flag to control whether or not the <term>Change
        Tracking</term> feature is enabled when a documented is opened in <ph keyref="webappProduct"
      />. The flag can be set in two possible ways:<ul id="ul_yds_frk_mqb">
        <li>In an <xref
            href="webauthor-integrate-embedded-launch.dita#webauthor-integrate-embedded-launch"
            >embedded link that launches Web Author</xref> so that when a user clicks the
          constructed link, the documented is opened in Web Author with the <term>Change
            Tracking</term> feature enabled.</li>
        <li>In a <xref href="customizing_plugins.dita#customizing_plugins">plugin</xref>. You can
          set this flag in your plugin's JavaScript code like
            this:<codeblock outputclass="language-javascript" id="codeblock_k1t_dgk_54b">goog.events.listen(workspace, 
sync.api.Workspace.EventType.BEFORE_EDITOR_LOADED, function(e) {
    if(forced_track_changes_condition) {
      e.options.trackChanges = 'forced';
    } else if(track_changes_enabled_condition) {
      e.options.trackChanges = 'enabled';
    } else if(track_changes_default_condition) {
      e.options.trackChanges = 'enabled';
    }
  }); </codeblock><p id="p_e1t_dgk_54b">Possible values for the <b>trackChanges</b>
              flag:<ul conkeyref="reusables-webauthor-customization/ul_bn3_jcf_11b"
              id="ul_y24_sy2_mqb">
              <li id="li_z24_sy2_mqb"/>
            </ul></p></li>
      </ul></p>
    <section id="section_j5h_53d_4kb">
      <title>Changing the Change Tracking State Programmatically</title>
      <p id="p_m1t_dgk_54b">To change the state of the change tracking feature after the document is loaded, you need
        to include code in your plugin's JavaScript code, similar to
        this:<codeblock outputclass="language-javascript" id="codeblock_n1t_dgk_54b">// Assuming you have an 'editor' variable of type sync.api.Editor
var editingSupport = editor.getEditingSupport();
if (editingSupport.getType() === sync.api.Editor.EditorTypes.AUTHOR) {
  var manager = editingSupport.getChangeTrackingManager();
  if (!manager.isTrackingChanges()) {
    var am = editingSupport.getActionsManager();
    am.getActionById("Author/TrackChanges").actionPerformed(function(){
      am.refreshActionsStatus("Author/TrackChanges");
    });
  }
}</codeblock></p>
    </section>
  </body>
</topic>
