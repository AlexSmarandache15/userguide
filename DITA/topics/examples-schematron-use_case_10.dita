<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="examples-schematron-use_case_10">
  <title>Schematron Use Case 10: Check for Specified Terms in a Paragraph</title>
  <body>
    <p><b>Description:</b> The following sample rule checks if any DITA <xmlelement>p</xmlelement>
      elements contain certain keywords defined in an external document.</p>
    <p><b>Sample Code:</b><codeblock outputclass="language-xml">&lt;sch:pattern&gt;
    &lt;sch:let name="keys" value="document('keys-common.ditamap')//keyword"/&gt;
    &lt;sch:rule context="p"&gt;
        &lt;sch:let name="text" value="."/&gt;
        &lt;sch:let name="matchedKeys" value="$keys[contains($text, normalize-space(.))]"/&gt;
        &lt;sch:report id="now001" test="count($matchedKeys) &gt; 0" role="error"&gt;
           The paragraph text contains the keywords: &lt;sch:value-of select="$matchedKeys"/&gt;
        &lt;/sch:report&gt;
    &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</codeblock></p>
    <p><b>Result:</b> The engine displays an error message if any of the keywords listed in an
      external document are detected within a DITA <xmlelement>p</xmlelement> element.</p>
  </body>
</topic>