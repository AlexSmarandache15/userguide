<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="examples-schematron-use_case_4">
  <title>Schematron Use Case 4: Check for Duplicate IDs</title>
  <body>
    <p><b>Description:</b> The following sample rule detects if there are two sibling
        <xmlelement>step</xmlelement> elements with the same <xmlatt>id</xmlatt> value in a DITA
      Task document.</p>
    <p><b>Sample
      Code:</b><codeblock outputclass="language-xml">&lt;sch:rule context="*[contains(@class, ' task/step ')]"&gt;
    &lt;sch:let name="id" value="@id"/&gt;
    &lt;sch:report
        test="preceding-sibling::element()[contains(@class, ' task/step ')][@id = $id]"&gt;
        Element with duplicate ID "&lt;sch:value-of select="$id"/&gt;" detected. 
    &lt;/sch:report&gt;
&lt;/sch:rule&gt;</codeblock></p>
    <p><b>Result:</b> The engine displays an error message when a duplicate ID is detected in
      sibling <xmlelement>step</xmlelement> elements within a DITA Task document.</p>
  </body>
</topic>