<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
  PUBLIC "-//OASIS//DTD DITA Topic//EN" "topic.dtd">
<topic id="examples-schematron-use_case_5">
  <title>Schematron Use Case 5: Check for Duplicate DITA Topic References</title>
  <body>
    <p><b>Description:</b> The following sample rule checks a DITA map for duplicate
        <xmlelement>topicref</xmlelement> elements with the same <xmlatt>href</xmlatt> value.</p>
    <p><b>Sample
      Code:</b><codeblock outputclass="language-xml">&lt;sch:rule context="*[contains(@class, ' map/topicref ')]"&gt;
    &lt;sch:let name="href" value="@href"/&gt;
    &lt;sch:report
        test="preceding::element()[contains(@class, ' map/topicref ')][@href = $href]"&gt;
        Duplicate topicref "&lt;sch:value-of select="$href"/&gt;" detected in map.
    &lt;/sch:report&gt;
&lt;/sch:rule&gt;</codeblock></p>
    <p><b>Result:</b> The engine displays an error message when multiple
        <xmlelement>topicref</xmlelement> elements with the same <xmlatt>href</xmlatt> value are
      detected in a DITA map.</p>
  </body>
</topic>